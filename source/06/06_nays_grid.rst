RIC-Nays 格子ファイル (\*.grid)
---------------------------------

RIC-Nays 格子ファイル（\*.grid）は、RIC-NaysPreで生成した計算格子の情報を
シングルブロックのBFC格子の構造と格子セルの状態を示すフラグ
(整数) として保存するバイナリ形式のファイルです。

格子ファイルのファイルフォーマットを表 6‑5に示します。

なお、iRIC では RIC-Nays
格子ファイルに含まれる障害物セルフラグは読み込まれません。

Table ‑ Grid file format

+--------------------+---------------------------+-----------------------------------------------------------------------+
| 項目               | データ型                  | 説明                                                                  |
+====================+===========================+=======================================================================+
| 配列のヘッダ       | 整数 (4バイト)            | 常に固定で 20 が入る                                                  |
+--------------------+---------------------------+-----------------------------------------------------------------------+
| ISize              | 整数 (4バイト)            | 格子の I方向 (上流側 下流側) のサイズ                                 |
+--------------------+---------------------------+-----------------------------------------------------------------------+
| JSize              | 整数 (4バイト)            | 格子のJ方向 (右岸側 左岸側) のサイズ                                  |
+--------------------+---------------------------+-----------------------------------------------------------------------+
| KSize              | 整数 (4バイト)            | 格子のK方向 (河床面 水面) のサイズ                                    |
+--------------------+---------------------------+-----------------------------------------------------------------------+
| Obst               | 整数 (4バイト)            | 0 なら障害物セルフラグなし                                            |
|                    |                           |                                                                       |
|                    |                           | 1なら障害物セルフラグあり                                             |
+--------------------+---------------------------+-----------------------------------------------------------------------+
| 配列のフッタ       | 整数 (4バイト)            | 常に固定で 20 が入る                                                  |
+--------------------+---------------------------+-----------------------------------------------------------------------+
| 配列のヘッダ       | 整数 (4バイト)            | ISize × JSize × KSize × 24                                            |
+--------------------+---------------------------+-----------------------------------------------------------------------+
| 格子X座標          | 実数 (8バイト)×GridSize   | X 座標を、以下の順序でI, J, K についてループして格納                  |
|                    |                           |                                                                       |
|                    |                           | X (I = 1, J = 1, K = 1)                                               |
|                    |                           |                                                                       |
|                    |                           | X (I = 2, J = 1, K = 1)                                               |
|                    |                           |                                                                       |
|                    |                           | …                                                                     |
|                    |                           |                                                                       |
|                    |                           | X (I = ISize, J = 1, K = 1)                                           |
|                    |                           |                                                                       |
|                    |                           | X (I = 1, J = 2, K = 1)                                               |
|                    |                           |                                                                       |
|                    |                           | …                                                                     |
|                    |                           |                                                                       |
|                    |                           | X (I = ISize, J = JSize, K = KSize)                                   |
+--------------------+---------------------------+-----------------------------------------------------------------------+
| 格子Y座標          | 実数 (8バイト)×GridSize   | Y 座標を、X 座標について示したのと同じ順序で格納                      |
+--------------------+---------------------------+-----------------------------------------------------------------------+
| 格子Z座標          | 実数 (8バイト)×GridSize   | Z 座標を、X 座標について示したのと同じ順序で格納                      |
+--------------------+---------------------------+-----------------------------------------------------------------------+
| 配列のフッタ       | 整数 (4バイト)            | ISize × JSize × KSize × 24                                            |
+--------------------+---------------------------+-----------------------------------------------------------------------+
| 配列のヘッダ       | 整数 (4バイト)            | Obst = 1 の場合のみ存在。                                             |
|                    |                           |                                                                       |
|                    |                           | (ISize -1) × (JSize-1) × (KSize-1) × 4                                |
+--------------------+---------------------------+-----------------------------------------------------------------------+
| 障害物セルフラグ   | 整数 (4バイト)×GridSize   | Obst = 1 の場合のみ存在。                                             |
|                    |                           |                                                                       |
|                    |                           | 障害物セルフラグ情報を、以下の順序で I, J, K についてループして格納   |
|                    |                           |                                                                       |
|                    |                           | Obst (I = 1, J = 1, K = 1)                                            |
|                    |                           |                                                                       |
|                    |                           | Obst (I = 2, J = 1, K = 1)                                            |
|                    |                           |                                                                       |
|                    |                           | …                                                                     |
|                    |                           |                                                                       |
|                    |                           | Obst (I = ISize -1, J = 1, K = 1)                                     |
|                    |                           |                                                                       |
|                    |                           | Obst (I = 1, J = 2, K = 1)                                            |
|                    |                           |                                                                       |
|                    |                           | …                                                                     |
|                    |                           |                                                                       |
|                    |                           | Obst (I = ISize -1, J = JSize -1, K = KSize -1)                       |
+--------------------+---------------------------+-----------------------------------------------------------------------+
| 配列のフッタ       | 整数 (4バイト)            | Obst = 1 の場合のみ存在。                                             |
|                    |                           |                                                                       |
|                    |                           | (ISize -1) × (JSize-1) × (KSize-1) × 4                                |
+--------------------+---------------------------+-----------------------------------------------------------------------+

※ GridSize = ISize×JSize×KSize
