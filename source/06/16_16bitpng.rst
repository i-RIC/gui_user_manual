16bit グレースケール PNGファイル (\*.png)
===============================================

16bit グレースケール PNG ファイルは、地形のラスターデータを
読み込むためのファイルです。

ゲームエンジン Unreal Engine 4 用に作成した地形データをインポートすることを
想定しています。

16bit グレースケール PNG ファイルをインポートする際は、
:numref:`16bit_png_file_table` に示すファイルを用意します。

.. _16bit_png_file_table:

.. list-table:: 16bit グレースケール PNG ファイル インポート用ファイル一覧
   :header-rows: 1

   * - ファイル
     - 説明

   * - \*.png
     - 標高のラスターデータを格納したファイル本体

   * - \*.pgw
     - ラスターデータの位置情報を格納したワールドファイル

   * - \*.png.meta
     - オフセットとスケールの情報を格納したファイル

\*.png
----------

標高のラスターデータを格納した、16bit グレースケールの PNG ファイルです。
PNG ファイルのフォーマットの詳細については以下を参照してください。

http://www.libpng.org/


\*.pgw
----------

ラスターデータの位置情報を格納したワールドファイルです。
ワールドファイルの詳細については :ref:`sec_file_georef` を参照してください。

\*.png.meta
---------------

\*.png ファイルに含まれる値の、オフセットとスケールの情報を格納したファイルです。

16bit グレースケール PNG ファイルでは、各ピクセルにおいて、0 ～ 65535 の値を持ちます。
0 が黒、65535 が白に相当します。

iRIC では、 \*.png.meta ファイルに格納されたオフセット :math:`o` と スケール :math:`s` の
値を使用して、色の値 :math:`c` から、標高の値 :math:`h` を以下の式で計算して
インポートします。

.. math::

   h = c \times s + o

\*.png.meta は、 YAML 形式のテキストファイルです。オフセットの値は base, スケールの値は resolution
という項目名で指定します。

\*.png.meta の例を :numref:`16bitpng_meta__example` に示します。


.. code-block:: text
   :name: 16bitpng_meta__example
   :caption: \*.png.meta ファイル例

   base: 312.5
   resolution: 0.1
